In the create_qr_code endpoint in the chat routes, a chat instance is created with the following additional fields:

            try:
                # Get unique index names from all documents
                all_index_names = list(
                    set(sum([doc.index_names for doc in documents], []))
                )

                # Create a guest chat with pre-loaded documents
                chat_result, status_code = chat_service.create_chat(
                    user_id=None,  # Guest chat
                    time_zone="UTC",
                    is_guest=True,
                    preset_documents={
                        "titles": [doc.title for doc in documents],
                        "index_names": all_index_names,
                    },
                )

The endpoint was designed with the intention of being able to create a qr code chat that can handle multiple preset documents, though the frontend is currently designed to link the chat to a single document. The indices which the documents belong to is set into the chat instance along with the document titles, and those are preset into the filter specifications for the given chat.

When logged in users access a chat generated by a qr code (more generally, any guest chat), the chat ownership will be rewritten so that it belongs to that user. The chat will then appear in the given user's chat sessions history with the preset documents attached.
